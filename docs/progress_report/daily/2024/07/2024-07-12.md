# デプロイ戦略の変更：Herokuへの移行計画

## 変更理由

1. AWS EC2での課題
   - インスタンスの不安定性（SSH接続、IP変更）
   - 環境構築の複雑さと時間コスト
   - 運用・保守の負担

2. Herokuのメリット
   - デプロイの簡便性
   - 運用の自動化
   - インフラ管理からの解放

## 移行計画

1. 準備フェーズ
   - Herokuアカウントの作成
   - Heroku CLIのインストール
   - アプリケーションの設定確認
     - 環境変数
     - データベース設定
     - Procfile作成

2. デプロイフェーズ
   - Gitリポジトリの準備
   - Herokuアプリケーションの作成
   - データベースのセットアップ
   - 初回デプロイ

## 次のアクション

1. [ ] Herokuアカウントのセットアップ
2. [ ] アプリケーションの設定調整
3. [ ] テストデプロイの実施

## AWS環境の整理

1. [ ] EC2インスタンスの停止
2. [ ] 不要なリソースの削除
3. [ ] セキュリティグループの整理

＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝

### 参考：前回のレポート：

# 2024-07-11 進捗レポート

## 1. 本日の進捗

- [x] デザインシステムの統一とUIの改善
  - デザインシステムドキュメントの作成
  - ナビバーの固定位置問題を解決
  - 背景色を#f8f9faに統一
  - ボタンホバー効果の追加
  - スクロール動作の改善

- [x] デプロイ計画の検討
  - Herokuの無料プラン廃止により、AWSを採用決定
  - 以下の構成を計画：
    - EC2（t2.micro）: Webサーバー
    - RDS（db.t3.micro）: PostgreSQL
    - Route 53: ドメイン管理（オプション）

- [x] AWS環境構築の開始
  - AWSアカウントの作成完了
  - IAMユーザー（tarou-admin）の作成
  - MFA認証の設定完了
  - EC2インスタンスの作成
    - インスタンスID: i-00aa983c25d80d12d
    - タイプ: t2.micro
    - セキュリティグループ: bookmarkly-sg
    - キーペア: bookmarkly-key.pem

## 2. 発生した問題

- Herokuの無料プラン廃止により、デプロイ先の変更が必要に
- AWSを採用することで、より実践的な環境構築が可能に

## 3. 次のステップ
- [ ] EC2インスタンスへの接続確認
- [ ] Nginxのインストールと設定
- [ ] RDSインスタンスの作成
- [ ] EC2とRDS間の接続設定

## 4. 技術的メモ

### AWS構成詳細

1. EC2設定
   - Amazon Linux 2023
   - t2.micro（無料利用枠）
   - Nginx + Puma

2. RDS設定
   - PostgreSQL
   - db.t3.micro（無料利用枠）
   - シングルAZ構成

3. セキュリティ設定
   - SSH (22)
   - HTTP (80)
   - HTTPS (443)
   - PostgreSQL (5432)

4. 監視・バックアップ
   - CloudWatchによるモニタリング
   - RDS自動バックアップ
   - 予算アラートの設定

### EC2接続情報
- インスタンスID: i-00aa983c25d80d12d
- セキュリティグループ: bookmarkly-sg
- 接続コマンド: 
  ```bash
  chmod 400 bookmarkly-key.pem
  ssh -i bookmarkly-key.pem ec2-user@<パブリックIPアドレス>
  ``` 

# AWS EC2デプロイ試行の報告と今後の方針

## 現状の課題

1. EC2インスタンスの不安定性
   - SSHアクセスが不安定
   - IPアドレスが変更される問題
   - インスタンスの再起動が必要な状況が発生

2. 環境構築の複雑さ
   - Ruby, Nginx等の手動インストールが必要
   - 設定ファイルの手動編集が必要
   - メンテナンスの負担が大きい

## 今後の方針

1. 短期的な対応
   - Herokuへの移行を検討
     - デプロイが容易
     - メンテナンスの負担が少ない
     - 安定した運用が期待できる

2. 中長期的な検討事項
   - AWS Elastic Beanstalkの利用
     - EC2の管理を自動化
     - デプロイが容易
   - コンテナ化（Docker）の検討
     - 環境の一貫性確保
     - デプロイの簡素化

## 次のアクション

1. Herokuへの移行準備
   - アカウント作成
   - デプロイ手順の確認
   - 必要な設定の洗い出し

2. 現在のAWS環境の整理
   - 使用していないリソースの削除
   - セキュリティグループの整理
   - コスト管理の見直し